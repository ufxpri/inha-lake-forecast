<!-- Image Upload Form Partial -->
<div id="upload-container" class="space-y-4">
    <!-- Upload Form -->
    <form 
        id="upload-form"
        hx-post="/upload/image" 
        hx-encoding="multipart/form-data"
        hx-target="#upload-result"
        hx-swap="innerHTML"
        hx-indicator="#upload-progress"
        class="space-y-4"
    >
        <!-- File Input -->
        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition">
            <input 
                type="file" 
                name="file" 
                id="file-input"
                accept="image/jpeg,image/jpg,image/png"
                required
                class="hidden"
                onchange="updateFileName(this)"
            />
            <label 
                for="file-input" 
                class="cursor-pointer flex flex-col items-center"
            >
                <svg class="w-12 h-12 text-gray-400 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                </svg>
                <span class="text-sm text-gray-600 mb-1">클릭하여 인경호 사진 선택</span>
                <span class="text-xs text-gray-500">JPG, PNG (최대 10MB)</span>
                <span id="file-name" class="text-sm text-blue-600 font-semibold mt-2"></span>
            </label>
        </div>
        
        <!-- Upload Button -->
        <button 
            type="submit"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
        >
            📤 업로드
        </button>
    </form>
    
    <!-- Progress Indicator -->
    <div id="upload-progress" class="htmx-indicator">
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <div class="flex items-center space-x-3">
                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div>
                <span class="text-blue-700 font-medium">이미지 업로드 및 분석 중...</span>
            </div>
            <div class="mt-2 text-sm text-blue-600">AI가 사진을 검증하고 있습니다</div>
        </div>
    </div>
    
    <!-- Upload Result -->
    <div id="upload-result" class="mt-4"></div>
    
    <!-- Upload Guidelines -->
    <div class="bg-gray-50 rounded-lg p-4 text-sm text-gray-600">
        <h4 class="font-semibold text-gray-800 mb-2">📋 업로드 가이드</h4>
        <ul class="space-y-1 list-disc list-inside">
            <li>인경호 풍경 사진만 업로드해주세요</li>
            <li>셀카, 문서, 음식 사진은 자동으로 거부됩니다</li>
            <li>사진의 EXIF 정보가 자동으로 추출됩니다</li>
            <li>업로드된 사진은 검토 후 서비스에 활용될 수 있습니다</li>
        </ul>
    </div>
</div>

<script>
    function updateFileName(input) {
        const fileName = input.files[0]?.name;
        const fileNameSpan = document.getElementById('file-name');
        if (fileName) {
            fileNameSpan.textContent = fileName;
        }
    }
</script>
